---
import BaseLayout from '@/layouts/BaseLayout.astro';
---

<BaseLayout
  title="You're Offline | AUXO Data Labs"
  description="No internet connection detected. Please check your connection and try again."
>
  <main id="main-content" class="offline-page">
    <div class="container">
      <div class="offline-content">
        <div class="offline-icon">
          <svg width="120" height="120" viewBox="0 0 120 120" fill="none">
            <circle cx="60" cy="60" r="55" stroke="var(--accent-green)" stroke-width="3" opacity="0.2" />
            <path
              d="M30 90L90 30M90 90L30 30"
              stroke="var(--accent-green)"
              stroke-width="4"
              stroke-linecap="round"
            />
            <path
              d="M25 50C35 35 85 35 95 50"
              stroke="var(--accent-green)"
              stroke-width="3"
              stroke-linecap="round"
              opacity="0.4"
            />
            <path
              d="M35 60C42 52 78 52 85 60"
              stroke="var(--accent-green)"
              stroke-width="3"
              stroke-linecap="round"
              opacity="0.6"
            />
          </svg>
        </div>

        <h1 class="offline-title">You're Offline</h1>

        <p class="offline-message">
          It looks like you've lost your internet connection. Some pages may be available offline, but most content requires an active connection.
        </p>

        <div class="offline-actions">
          <button
            type="button"
            class="btn-primary retry-button"
            onclick="window.location.reload()"
          >
            Try Again
          </button>
          <a href="/" class="btn-secondary">
            Go to Homepage
          </a>
        </div>

        <div class="offline-tips">
          <h2 class="tips-title">While you're offline</h2>
          <ul class="tips-list">
            <li>Check your WiFi or mobile data connection</li>
            <li>Try disabling airplane mode</li>
            <li>Previously visited pages may still be accessible</li>
          </ul>
        </div>

        <div class="connection-status" aria-live="polite" role="status">
          <span class="status-indicator offline">Offline</span>
        </div>
      </div>
    </div>
  </main>
</BaseLayout>

<style>
  .offline-page {
    min-height: calc(100vh - var(--header-height, 80px));
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 4rem 0;
    background: var(--bg-surface);
  }

  .container {
    max-width: 600px;
    margin: 0 auto;
    padding: 0 1.5rem;
  }

  .offline-content {
    text-align: center;
    padding: 3rem 2rem;
    background: var(--bg-card);
    border: 1px solid var(--border-theme);
    border-radius: 1.5rem;
  }

  .offline-icon {
    margin: 0 auto 2rem;
    animation: fadeIn 0.6s ease;
  }

  .offline-title {
    font-size: 2.5rem;
    font-weight: 800;
    margin-bottom: 1rem;
    color: var(--text-primary);
  }

  .offline-message {
    font-size: 1.125rem;
    color: var(--text-secondary);
    line-height: 1.7;
    margin-bottom: 2.5rem;
  }

  .offline-actions {
    display: flex;
    gap: 1rem;
    justify-content: center;
    flex-wrap: wrap;
    margin-bottom: 3rem;
  }

  .btn-primary,
  .btn-secondary {
    padding: 0.875rem 2rem;
    font-size: 1rem;
    font-weight: 600;
    border-radius: 0.5rem;
    cursor: pointer;
    transition: all 0.3s ease;
    text-decoration: none;
    display: inline-block;
    border: 2px solid;
  }

  .btn-primary {
    background: var(--accent-green);
    color: var(--bg-primary);
    border-color: var(--accent-green);
  }

  .btn-primary:hover {
    background: transparent;
    color: var(--accent-green);
  }

  .btn-secondary {
    background: transparent;
    color: var(--text-primary);
    border-color: var(--border-theme);
  }

  .btn-secondary:hover {
    border-color: var(--accent-green);
    color: var(--accent-green);
  }

  .offline-tips {
    padding: 2rem;
    background: var(--bg-surface);
    border-radius: 1rem;
    margin-bottom: 2rem;
  }

  .tips-title {
    font-size: 1.25rem;
    font-weight: 700;
    margin-bottom: 1rem;
    color: var(--text-primary);
  }

  .tips-list {
    list-style: none;
    padding: 0;
    margin: 0;
    text-align: left;
  }

  .tips-list li {
    padding: 0.5rem 0 0.5rem 2rem;
    position: relative;
    color: var(--text-secondary);
  }

  .tips-list li::before {
    content: 'â€¢';
    position: absolute;
    left: 0.75rem;
    color: var(--accent-green);
    font-weight: 700;
    font-size: 1.25rem;
  }

  .connection-status {
    margin-top: 2rem;
    padding: 1rem;
    border-radius: 0.5rem;
    background: var(--bg-surface);
  }

  .status-indicator {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    font-weight: 600;
    font-size: 0.875rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }

  .status-indicator::before {
    content: '';
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background: currentColor;
    animation: pulse 2s ease-in-out infinite;
  }

  .status-indicator.offline {
    color: #ef4444;
  }

  .status-indicator.online {
    color: var(--accent-green);
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(-20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes pulse {
    0%, 100% {
      opacity: 1;
    }
    50% {
      opacity: 0.5;
    }
  }

  @media (max-width: 640px) {
    .offline-content {
      padding: 2rem 1.5rem;
    }

    .offline-title {
      font-size: 2rem;
    }

    .offline-message {
      font-size: 1rem;
    }

    .offline-actions {
      flex-direction: column;
    }

    .btn-primary,
    .btn-secondary {
      width: 100%;
    }

    .offline-tips {
      padding: 1.5rem;
    }
  }
</style>

<script>
  // Monitor connection status
  function updateConnectionStatus() {
    const statusElement = document.querySelector('.status-indicator');
    if (!statusElement) return;

    if (navigator.onLine) {
      statusElement.classList.remove('offline');
      statusElement.classList.add('online');
      statusElement.textContent = 'Back Online';

      // Automatically retry after 2 seconds
      setTimeout(() => {
        window.location.reload();
      }, 2000);
    } else {
      statusElement.classList.remove('online');
      statusElement.classList.add('offline');
      statusElement.textContent = 'Offline';
    }
  }

  window.addEventListener('online', updateConnectionStatus);
  window.addEventListener('offline', updateConnectionStatus);

  // Check connection on load
  document.addEventListener('astro:page-load', updateConnectionStatus);
</script>
