---
import BaseLayout from "../layouts/BaseLayout.astro";
import { siteData } from "../data/config/site";
import { Icon } from "astro-icon/components";
import BackgroundDecorations from "../components/ui/BackgroundDecorations.astro";
import { createUrl } from "../utils/url";
import Button from "../components/ui/Button.astro";
import "../styles/sections/contact-sections.css";
---

<BaseLayout
  title="Contact Us | AUXO Data Labs"
  description="Get in touch with AUXO Data Labs. We're here to help transform your data analytics capabilities. Contact us for inquiries, consultations, or partnerships."
  showParticles={false}
>
  <!-- Single Unified Contact Section -->
  <section
    id="contact-main"
    class="relative w-full min-h-screen flex items-center justify-center overflow-hidden py-20 sm:py-24 lg:py-28"
  >
    <BackgroundDecorations gradients={["hero"]} patterns={["grid"]} />

    <div class="grid-container relative z-10 w-full">
      <div class="col-span-full max-w-7xl mx-auto w-full">
        <div class="text-center mb-10 sm:mb-12 lg:mb-16">
          <h1 class="text-h1 font-extrabold mb-4 sm:mb-5 leading-tight tracking-tight text-theme-primary font-display" data-aos="fade-down" data-aos-duration="800">
            Let's <span class="text-accent-green">Connect</span>
          </h1>
          <p class="text-body-lg sm:text-body-xl text-theme-secondary leading-relaxed max-w-2xl mx-auto font-body" data-aos="fade-up" data-aos-delay="100">
            Ready to transform your data analytics? Start with a conversation.
          </p>
        </div>

        <div class="flex justify-center mb-12 sm:mb-16 lg:mb-20" data-aos="zoom-in" data-aos-delay="200">
          <Button
            variant="primary"
            size="lg"
            href="https://calendly.com/auxodata/discovery-call"
            class="font-bold shadow-lg shadow-accent-green/20 justify-center hover:shadow-xl hover:shadow-accent-green/30 hover:-translate-y-0.5 transition-all min-h-[52px] flex-nowrap"
            target="_blank"
            rel="noopener noreferrer"
          >
            <span class="whitespace-nowrap">Book Discovery Call</span>
            <Icon name="mdi:calendar-check" class="w-5 h-5 flex-shrink-0" />
          </Button>
        </div>

        <div class="grid lg:grid-cols-2 gap-8 lg:gap-12 xl:gap-16" id="contact-form">
          <div class="space-y-6 lg:space-y-8" data-aos="fade-right" data-aos-duration="600" data-aos-delay="300">
            <div class="text-center lg:text-left">
              <h2 class="text-h3 font-extrabold mb-3 text-theme-primary font-display">
                Reach Out
              </h2>
              <p class="text-theme-secondary font-body leading-relaxed max-w-md mx-auto lg:mx-0">
                We typically respond within 24 hours. Share your challenge, and we'll provide insights on how we can help.
              </p>
            </div>

            <div class="space-y-4 max-w-md mx-auto lg:mx-0 lg:max-w-none">
              <a
                href={`mailto:${siteData.email}`}
                class="flex items-center gap-4 p-4 sm:p-5 rounded-xl bg-theme-card border border-accent-green/20 hover:border-accent-green/40 hover:shadow-lg hover:shadow-accent-green/10 hover:-translate-y-0.5 transition-all duration-300 group"
              >
                <div class="w-12 h-12 bg-accent-green/15 rounded-lg flex items-center justify-center flex-shrink-0 group-hover:bg-accent-green/25 group-hover:scale-110 transition-all">
                  <Icon name="mdi:email-outline" class="w-6 h-6 text-accent-green" />
                </div>
                <div class="flex-1 min-w-0">
                  <div class="text-xs font-semibold text-theme-secondary mb-1 font-body uppercase tracking-wide">Email</div>
                  <div class="text-sm sm:text-base font-bold text-theme-primary font-body truncate group-hover:text-accent-green transition-colors">
                    {siteData.email}
                  </div>
                </div>
                <Icon name="mdi:arrow-right" class="w-5 h-5 text-accent-green opacity-0 group-hover:opacity-100 -translate-x-2 group-hover:translate-x-0 transition-all flex-shrink-0" />
              </a>

              <div class="flex items-center gap-4 p-4 sm:p-5 rounded-xl bg-theme-card border border-accent-green/20">
                <div class="w-12 h-12 bg-accent-green/15 rounded-lg flex items-center justify-center flex-shrink-0">
                  <Icon name="mdi:map-marker" class="w-6 h-6 text-accent-green" />
                </div>
                <div class="flex-1">
                  <div class="text-xs font-semibold text-theme-secondary mb-1 font-body uppercase tracking-wide">Location</div>
                  <div class="text-sm sm:text-base font-bold text-theme-primary font-body">
                    {siteData.address.city}, {siteData.address.country}
                  </div>
                </div>
              </div>

              <div class="flex items-center gap-4 p-4 sm:p-5 rounded-xl bg-accent-green/10 border border-accent-green/30">
                <div class="w-12 h-12 bg-accent-green/20 rounded-lg flex items-center justify-center flex-shrink-0">
                  <Icon name="mdi:clock-check-outline" class="w-6 h-6 text-accent-green" />
                </div>
                <div class="flex-1">
                  <div class="text-xs font-semibold text-theme-secondary mb-1 font-body uppercase tracking-wide">Response Time</div>
                  <div class="text-base sm:text-lg font-extrabold text-accent-green font-display">
                    {siteData.stats.responseTime}
                  </div>
                </div>
              </div>
            </div>

          </div>

          <div class="max-w-md mx-auto lg:mx-0 lg:max-w-none w-full" data-aos="fade-left" data-aos-duration="600" data-aos-delay="300">
            <div class="bg-theme-card border-2 border-accent-green/20 rounded-2xl p-6 sm:p-8 relative overflow-hidden group hover:border-accent-green/30 transition-all duration-normal h-full">
              <div class="absolute top-0 right-0 w-64 h-64 bg-accent-green/5 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2 opacity-50 group-hover:opacity-75 transition-opacity duration-normal pointer-events-none"></div>
              <div class="absolute bottom-0 left-0 w-48 h-48 bg-accent-green/5 rounded-full blur-3xl translate-y-1/2 -translate-x-1/2 opacity-30 group-hover:opacity-60 transition-opacity duration-normal pointer-events-none"></div>

              <form id="contact-form-element" class="relative z-10 space-y-5">
                <div class="grid sm:grid-cols-2 gap-4">
                  <div>
                    <label for="name" class="block text-sm font-bold text-theme-primary mb-2 font-body">
                      Name <span class="text-accent-green">*</span>
                    </label>
                    <input
                      type="text"
                      id="name"
                      name="name"
                      required
                      class="w-full px-4 py-3 bg-theme-surface border-2 border-accent-green/20 rounded-xl text-theme-primary placeholder-theme-tertiary focus:outline-none focus:border-accent-green focus:ring-2 focus:ring-accent-green/20 transition-all duration-fast font-body min-h-[48px] hover:border-accent-green/30"
                      placeholder="Your name"
                    />
                  </div>

                  <div>
                    <label for="email" class="block text-sm font-bold text-theme-primary mb-2 font-body">
                      Email <span class="text-accent-green">*</span>
                    </label>
                    <input
                      type="email"
                      id="email"
                      name="email"
                      required
                      class="w-full px-4 py-3 bg-theme-surface border-2 border-accent-green/20 rounded-xl text-theme-primary placeholder-theme-tertiary focus:outline-none focus:border-accent-green focus:ring-2 focus:ring-accent-green/20 transition-all duration-fast font-body min-h-[48px] hover:border-accent-green/30"
                      placeholder="you@company.com"
                    />
                  </div>
                </div>

                <div>
                  <label for="company" class="block text-sm font-bold text-theme-primary mb-2 font-body">
                    Company <span class="text-theme-tertiary text-xs font-normal">(Optional)</span>
                  </label>
                  <input
                    type="text"
                    id="company"
                    name="company"
                    class="w-full px-4 py-3 bg-theme-surface border-2 border-accent-green/20 rounded-xl text-theme-primary placeholder-theme-tertiary focus:outline-none focus:border-accent-green focus:ring-2 focus:ring-accent-green/20 transition-all duration-fast font-body min-h-[48px] hover:border-accent-green/30"
                    placeholder="Your company"
                  />
                </div>

                <div>
                  <label for="subject" class="block text-sm font-bold text-theme-primary mb-2 font-body">
                    Subject <span class="text-accent-green">*</span>
                  </label>
                  <input
                    type="text"
                    id="subject"
                    name="subject"
                    required
                    class="w-full px-4 py-3 bg-theme-surface border-2 border-accent-green/20 rounded-xl text-theme-primary placeholder-theme-tertiary focus:outline-none focus:border-accent-green focus:ring-2 focus:ring-accent-green/20 transition-all duration-fast font-body min-h-[48px] hover:border-accent-green/30"
                    placeholder="What brings you here?"
                  />
                </div>

                <div>
                  <label for="message" class="block text-sm font-bold text-theme-primary mb-2 font-body">
                    Message <span class="text-accent-green">*</span>
                  </label>
                  <textarea
                    id="message"
                    name="message"
                    required
                    rows="4"
                    class="w-full px-4 py-3 bg-theme-surface border-2 border-accent-green/20 rounded-xl text-theme-primary placeholder-theme-tertiary focus:outline-none focus:border-accent-green focus:ring-2 focus:ring-accent-green/20 transition-all duration-fast resize-y font-body min-h-[100px] hover:border-accent-green/30"
                    placeholder="Tell us about your project or challenge..."
                  ></textarea>
                </div>

                <button
                  type="submit"
                  class="w-full px-6 py-4 bg-accent-green text-on-accent font-bold rounded-xl hover:bg-accent-green/90 hover:shadow-xl hover:shadow-accent-green/30 hover:-translate-y-0.5 active:bg-accent-green/80 active:translate-y-0 transition-all duration-fast focus:outline-none focus:ring-2 focus:ring-accent-green focus:ring-offset-2 focus:ring-offset-theme-card min-h-[52px] font-body flex items-center justify-center gap-2 group/btn"
                >
                  <span>Send Message</span>
                  <Icon name="mdi:send" class="w-5 h-5 group-hover/btn:translate-x-1 group-hover/btn:-translate-y-0.5 transition-transform duration-fast" />
                </button>

                <p class="text-xs text-theme-secondary text-center font-body pt-1">
                  By submitting, you agree to our{" "}
                  <a href={createUrl("legal/privacy-policy")} class="text-accent-green hover:underline font-medium transition-colors">
                    Privacy Policy
                  </a>
                </p>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
</BaseLayout>

<script>
  import { setupContactPage } from "../scripts/pages/contactPage";
  import { setupSectionInit } from "../scripts/sections/utils/initUtils";
  import { initEmailJS, handleContactFormSubmit, addRealTimeValidation } from "../scripts/forms/emailHandler";
  import { initNotifications } from "../scripts/utils/notifications";

  setupSectionInit(setupContactPage);

  // Initialize EmailJS and notifications
  initEmailJS();
  initNotifications();

  // Setup form validation and submission
  const form = document.getElementById('contact-form-element') as HTMLFormElement;
  if (form) {
    form.addEventListener('submit', handleContactFormSubmit);
    addRealTimeValidation(form);
  }
</script>
