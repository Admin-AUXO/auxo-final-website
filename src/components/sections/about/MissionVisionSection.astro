---
import { Icon } from "astro-icon/components";
import SectionContainer from "@/components/layouts/SectionContainer.astro";
import BackgroundDecorations from "@/components/ui/BackgroundDecorations.astro";
import SectionHeader from "@/components/ui/SectionHeader.astro";
import Carousel from "@/components/ui/Carousel.astro";
import HighlightText from "@/components/ui/HighlightText.astro";

interface Props {
  content: {
    title: string;
    mission: string;
    missionHighlight?: string | string[];
    vision: string;
    visionHighlight?: string | string[];
  };
}

const { content } = Astro.props;
const missionVisionItems = [
  { type: "mission", icon: "mdi:flag-checkered", title: "Mission", content: content.mission },
  { type: "vision", icon: "mdi:telescope", title: "Vision", content: content.vision },
];
---

<SectionContainer
  id="mission-vision"
  padding="normal"
  background="default"
  class="relative mission-vision-section section-divider"
>
  <BackgroundDecorations gradients={["hero"]} />
  
  <div class="grid-container relative z-10">
    <div class="col-span-full max-w-7xl mx-auto w-full">
      <SectionHeader
        title={content.title}
        highlight={["Mission", "Vision"]}
      />

      <div class="hidden lg:grid lg:grid-cols-2 gap-6 sm:gap-8 lg:gap-10 xl:gap-12 max-w-6xl mx-auto">
        <div class="mission-card" data-reveal="fade-right" data-reveal-delay="150" data-reveal-duration="250" data-reveal-easing="ease-out">
          <div class="h-full bg-theme-card border border-theme-light rounded-xl p-6 sm:p-8 lg:p-10 relative overflow-hidden group hover:border-accent-green/40 transition-all duration-300">
            <div class="absolute top-0 right-0 w-32 h-32 bg-accent-green/5 rounded-full blur-3xl opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
            <div class="relative z-10">
              <div class="flex items-center gap-4 mb-4 sm:mb-6">
                <Icon name="mdi:flag-checkered" class="w-8 h-8 sm:w-10 sm:h-10 text-accent-green flex-shrink-0" />
                <h3 class="text-h4 font-bold text-theme-primary font-display">Mission</h3>
              </div>
              <p class="text-body-lg sm:text-body-xl text-theme-secondary leading-relaxed font-body">
                {content.mission}
              </p>
            </div>
          </div>
        </div>

        <div class="vision-card" data-reveal="fade-left" data-reveal-delay="150" data-reveal-duration="250" data-reveal-easing="ease-out">
          <div class="h-full bg-theme-card border border-theme-light rounded-xl p-6 sm:p-8 lg:p-10 relative overflow-hidden group hover:border-accent-green/40 transition-all duration-300">
            <div class="absolute top-0 left-0 w-32 h-32 bg-accent-green/5 rounded-full blur-3xl opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
            <div class="relative z-10">
              <div class="flex items-center gap-4 mb-4 sm:mb-6">
                <Icon name="mdi:telescope" class="w-8 h-8 sm:w-10 sm:h-10 text-accent-green flex-shrink-0" />
                <h3 class="text-h4 font-bold text-theme-primary font-display">Vision</h3>
              </div>
              <p class="text-body-lg sm:text-body-xl text-theme-secondary leading-relaxed font-body">
                {content.vision}
              </p>
            </div>
          </div>
        </div>
      </div>

      <Carousel
        containerId="mission-vision-carousel-container"
        trackId="mission-vision-carousel-track"
        items={missionVisionItems}
        wrapperClass="lg:hidden mission-vision-carousel mission-vision-carousel-wrapper"
        breakpoint={1024}
        activateOnDesktop={false}
      >
        {missionVisionItems.map((item, index) => (
          <div class="carousel-slide embla__slide flex-shrink-0" data-index={index}>
            <div class={`h-full bg-theme-card border border-theme-light rounded-xl relative overflow-hidden group hover:border-accent-green/40 transition-all duration-300 ${item.type}-card`}>
              <div class={`absolute ${item.type === "mission" ? "top-0 right-0" : "top-0 left-0"} w-32 h-32 bg-accent-green/5 rounded-full blur-3xl opacity-0 group-hover:opacity-100 transition-opacity duration-500`}></div>
              <div class="relative z-10 flex flex-col h-full">
                <div class="flex items-center justify-between mb-2.5">
                  <h3 class="font-bold text-theme-primary font-display">{item.title}</h3>
                  <Icon name={item.icon} class="w-8 h-8 sm:w-9 sm:h-9 text-accent-green flex-shrink-0 ml-3" />
                </div>
                <p class="text-theme-secondary leading-relaxed font-body flex-grow">
                  {item.content}
                </p>
              </div>
            </div>
          </div>
        ))}
      </Carousel>
    </div>
  </div>
</SectionContainer>

<script>
  import { autoInitCarousels } from "@/scripts/sections/autoInit";
  autoInitCarousels();
</script>


