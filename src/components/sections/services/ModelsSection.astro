---
import { Icon } from "astro-icon/components";
import SectionContainer from "../../layouts/SectionContainer.astro";
import HighlightText from "../../ui/HighlightText.astro";
import { servicesContent } from "../../../data/content/services";

const content = servicesContent.models;

const modelIcons = [
  "mdi:map-search",
  "mdi:waves",
  "mdi:cogs",
  "mdi:account-tie",
];
---

<SectionContainer
  id="models"
  padding="normal"
  background="elevated"
  class="relative models-section section-divider overflow-hidden"
>
  <div class="section-gradient-dual absolute inset-0 pointer-events-none z-0"></div>
  <div class="section-pattern-grid absolute inset-0 pointer-events-none z-0"></div>
  
  <div class="grid-container relative z-10">
    <div class="col-span-full max-w-6xl mx-auto w-full">
      <div
        class="text-center mb-8 sm:mb-10 lg:mb-12"
        data-aos="fade-down"
        data-aos-duration="800"
      >
        <div class="inline-flex items-center justify-center gap-3 mb-4 sm:mb-5">
          <Icon name="mdi:clipboard-text-outline" class="w-9 h-9 sm:w-10 sm:h-10 text-accent-green" />
          <h2 class="text-h2 sm:text-h1 font-extrabold leading-tight tracking-tight font-display">
            <HighlightText text={content.title} highlight="Engagement Model" />
          </h2>
        </div>
        <p class="text-body-md sm:text-body-lg text-theme-secondary max-w-3xl mx-auto px-4">
          {content.descriptionHighlight ? (
            <HighlightText text={content.description} highlight={content.descriptionHighlight} />
          ) : (
            content.description
          )}
        </p>
      </div>

      <div
        class="mb-8 sm:mb-10 lg:mb-12"
        data-aos="fade-up"
        data-aos-duration="600"
        data-aos-delay="100"
      >
        <div class="models-accordion-container">
          {content.models.map((model, index) => (
            <details class="models-accordion-item" data-model={String(index)} open={index === 0}>
              <summary class="models-accordion-summary">
                <div class="models-accordion-header">
                  <div class="models-accordion-icon">
                    <Icon name={modelIcons[index]} class="w-5 h-5 sm:w-6 sm:h-6 text-accent-green" />
                  </div>
                  <div class="models-accordion-title-wrapper">
                    <h3 class="models-accordion-title mb-1">{model.name}</h3>
                    <span class="models-accordion-subheadline block">{model.subheadline}</span>
                  </div>
                </div>
                <Icon
                  name="mdi:chevron-down"
                  class="models-accordion-chevron"
                  aria-hidden="true"
                />
              </summary>
              <div class="models-accordion-content">
                <div class="models-accordion-body">
                  <p class="models-accordion-description mb-4">
                    {model.descriptionHighlight ? (
                      <HighlightText text={model.description} highlight={model.descriptionHighlight} />
                    ) : (
                      model.description
                    )}
                  </p>
                  
                  <div class="models-accordion-section">
                    <div class="models-accordion-section-header">
                      <Icon name="mdi:target" class="w-4 h-4 sm:w-5 sm:h-5 text-accent-green" />
                      <p class="models-accordion-section-label">Best For</p>
                    </div>
                    <p class="models-accordion-section-content">
                      {model.bestForHighlight ? (
                        <HighlightText text={model.bestFor} highlight={model.bestForHighlight} />
                      ) : (
                        model.bestFor
                      )}
                    </p>
                  </div>
                
                  <div class="models-accordion-section">
                    <p class="models-accordion-section-label">Key Deliverables</p>
                    <div class="models-accordion-deliverables">
                      {model.deliverables.map((deliverable) => (
                        <div class="models-accordion-deliverable-item">
                          <Icon name="mdi:check-circle" class="w-3.5 h-3.5 sm:w-4 sm:h-4 text-accent-green flex-shrink-0" />
                          <span class="models-accordion-deliverable-text">{deliverable}</span>
                        </div>
                      ))}
                    </div>
                  </div>

                  <div class="models-accordion-section">
                    <p class="models-accordion-section-label">Ideal For</p>
                    <div class="models-accordion-tags">
                      {model.idealFor.map((tag) => (
                        <span class="models-accordion-tag">{tag}</span>
                      ))}
                    </div>
                  </div>
                </div>
              </div>
            </details>
          ))}
        </div>
      </div>
    </div>
  </div>
</SectionContainer>

