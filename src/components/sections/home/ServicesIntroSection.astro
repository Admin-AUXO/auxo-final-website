---
import Card from "@/components/ui/Card.astro";
import SectionContainer from "@/components/layouts/SectionContainer.astro";
import BackgroundDecorations from "@/components/ui/BackgroundDecorations.astro";
import SectionHeader from "@/components/ui/SectionHeader.astro";
import Carousel from "@/components/ui/Carousel.astro";
import Button from "@/components/ui/Button.astro";
import { Icon } from "astro-icon/components";
import type { HomepageContent } from "@/data/content/homepage";
import { createUrl } from "@/utils/url";

interface Props {
  content: HomepageContent["servicesIntro"];
}

const { content } = Astro.props;
---

<SectionContainer
  id="services-intro"
  padding="normal"
  background="card"
  class="relative transition-colors services-intro-section section-divider-top overflow-hidden"
>
  <BackgroundDecorations patterns={["grid"]} />
  
  <div class="grid-container relative z-10">
    <div class="col-span-full max-w-7xl mx-auto w-full">
      <SectionHeader
        title={content.title}
        subtitle={content.subheading}
        highlight="Starting Points"
        subtitleHighlight="begin"
      />

      <div class="hidden lg:grid lg:grid-cols-3 lg:gap-6 xl:gap-8 services-grid-desktop">
        {content.items.map((item, index) => (
          <div data-reveal="fade-up" data-reveal-delay={50 + (index * 40)} data-reveal-duration="200" data-reveal-easing="ease-out">
            <Card
              variant="service"
              icon={item.icon}
              title={item.title}
              description={item.description}
              link={item.link ? createUrl(item.link) : undefined}
              index={index}
              isCarousel={false}
            />
          </div>
        ))}
      </div>

      <Carousel
        containerId="services-carousel-container"
        trackId="services-carousel-track"
        items={content.items}
        wrapperClass="services-carousel-mobile services-carousel-wrapper"
        breakpoint={1024}
        activateOnDesktop={false}
      >
        {content.items.map((item, index) => (
          <div class="carousel-slide embla__slide" data-index={index}>
            <Card
              variant="service"
              icon={item.icon}
              title={item.title}
              description={item.description}
              link={item.link ? createUrl(item.link) : undefined}
              index={index}
              isCarousel={true}
            />
          </div>
        ))}
      </Carousel>

      <div class="text-center mt-8 sm:mt-10 lg:mt-12 px-4" data-reveal="fade-up" data-reveal-delay="100" data-reveal-duration="200" data-reveal-easing="ease-out">
        <Button
          variant="primary"
          size="lg"
          href={createUrl(content.navigationButton.href)}
          class="w-full sm:w-auto font-bold shadow-lg shadow-accent-green/20 justify-center lg:hover:shadow-xl lg:hover:shadow-accent-green/30 transition-all min-h-[48px] sm:min-h-[44px] flex-nowrap px-6 sm:px-8"
        >
          <span class="whitespace-nowrap">{content.navigationButton.text}</span>
          <Icon name="mdi:arrow-right" class="w-4 h-4 flex-shrink-0" />
        </Button>
      </div>
    </div>
  </div>
</SectionContainer>

<script>
  import { autoInitCarousels } from "@/scripts/sections/autoInit";
  autoInitCarousels();
</script>

