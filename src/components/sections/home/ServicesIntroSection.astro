---
import ServiceCard from "../../ui/ServiceCard.astro";
import SectionContainer from "../../layouts/SectionContainer.astro";
import BackgroundDecorations from "../../ui/BackgroundDecorations.astro";
import SectionHeader from "../../ui/SectionHeader.astro";
import Carousel from "../../ui/Carousel.astro";
import Button from "../../ui/Button.astro";
import { Icon } from "astro-icon/components";
import {
  homepageContent,
  type HomepageContent,
} from "../../../data/content/homepage";
import { createUrl } from "../../../utils/url";

const content: HomepageContent["servicesIntro"] = homepageContent.servicesIntro;
---

<SectionContainer
  id="services-intro"
  padding="normal"
  background="card"
  class="relative transition-colors pb-8 sm:pb-12 lg:pb-16 services-intro-section section-divider-top"
>
  <BackgroundDecorations patterns={["grid"]} />
  
  <div class="grid-container relative z-10">
    <div class="col-span-full max-w-7xl mx-auto w-full">
      <SectionHeader
        title={content.title}
        subtitle={content.subheading}
        highlight="Starting Points"
        subtitleHighlight="begin"
      />

      <div class="hidden lg:grid lg:grid-cols-3 lg:gap-6 xl:gap-8 services-grid-desktop">
        {content.items.map((item, index) => (
          <ServiceCard
            icon={item.icon}
            title={item.title}
            description={item.description}
            link={item.link ? createUrl(item.link) : undefined}
            index={index}
            variant="grid"
          />
        ))}
      </div>

      <Carousel
        containerId="services-carousel-container"
        trackId="services-carousel-track"
        dotSelector=".services-carousel-dot"
        items={content.items}
        wrapperClass="services-carousel-mobile services-carousel-wrapper"
        dotsClass="services-carousel-dots"
        dotClass="services-carousel-dot"
        breakpoint={1024}
        activateOnDesktop={false}
      >
        {content.items.map((item, index) => (
          <div class="carousel-slide embla__slide flex-shrink-0" data-index={index}>
            <ServiceCard
              icon={item.icon}
              title={item.title}
              description={item.description}
              link={item.link ? createUrl(item.link) : undefined}
              index={index}
              variant="carousel"
            />
          </div>
        ))}
      </Carousel>

      <div class="text-center mt-8 sm:mt-10 lg:mt-12 xl:mt-16 px-4">
        <Button
          variant="primary"
          size="lg"
          href={createUrl(content.navigationButton.href)}
          class="w-full sm:w-auto font-bold shadow-lg shadow-accent-green/20 justify-center hover:shadow-xl hover:shadow-accent-green/30 hover:-translate-y-0.5 transition-all min-h-[48px] sm:min-h-[44px] flex-nowrap px-6 sm:px-8"
        >
          <span class="whitespace-nowrap">{content.navigationButton.text}</span>
          <Icon name="mdi:arrow-right" class="w-4 h-4 flex-shrink-0" />
        </Button>
      </div>
    </div>
  </div>
</SectionContainer>

<script>
  import "../../../scripts/sections/home/servicesIntroSection";
</script>
