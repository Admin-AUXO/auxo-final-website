---
import {
  homepageContent,
  type HomepageContent,
} from "../../../data/content/homepage";
import SectionContainer from "../../layouts/SectionContainer.astro";
import HighlightText from "../../ui/HighlightText.astro";

const problemContent: HomepageContent["problem"] = homepageContent.problem;
const paragraphs = problemContent.valueProposition.split("\n\n");
const highlightLine = paragraphs[paragraphs.length - 1];
const introParagraphs = paragraphs.slice(0, -1);

const highlightParts = highlightLine.split(". ");
const highlightLine1 = highlightParts.slice(0, 2).join(". ") + ".";
const highlightLine2 = highlightParts.slice(2).join("");
---

<SectionContainer
  id="value-proposition"
  padding="normal"
  background="surface"
  class="relative flex items-center transition-colors value-proposition-section section-divider-bottom"
>
  <div class="section-gradient-hero absolute inset-0 pointer-events-none z-0"></div>
  
  <div class="grid-container relative z-10">
    <div
      class="col-span-full text-center max-w-6xl mx-auto w-full"
    >
      <div
        class="intro-text space-y-5 sm:space-y-6 lg:space-y-8 xl:space-y-10 mb-10 sm:mb-12 lg:mb-16 xl:mb-20"
      >
        {introParagraphs.map((paragraph, index) => (
          <p
            class="text-body-lg leading-[1.75] text-theme-primary transition-colors font-normal fade-in-text font-body"
            style={`animation-delay: ${index * 0.4}s;`}
          >
            <HighlightText text={paragraph} highlight="AUXO" />
          </p>
        ))}
      </div>

      <div class="highlight-line-container mb-8 sm:mb-10 lg:mb-12 xl:mb-14">
        <p
          class="text-h1 font-extrabold leading-tight tracking-tight text-theme-primary transition-colors highlight-text font-display"
        >
          <span class="block">{highlightLine1}</span>
          <span class="block">{highlightLine2}</span>
        </p>
      </div>

      <div class="underline-animation">
        <div class="underline-line"></div>
      </div>
    </div>
  </div>
</SectionContainer>

<script>
  import { initValueProposition } from "../../../scripts/sections/home/valueProposition";
  initValueProposition();
</script>

