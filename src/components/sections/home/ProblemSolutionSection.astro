---
import type { HomepageContent } from '@/data/content/homepage';

interface Props {
  content: HomepageContent["valueProposition"];
}

const { content: problemContent } = Astro.props;

const highlightAuxo = (text: string) => {
  if (!text) return '';
  return text.replace(/\b(AUXO|Auxo)\b/g, '<span class="auxo-highlight">$1</span>');
};

const line1 = problemContent?.line1 || '';
const line2 = problemContent?.line2 || '';
const line1Html = highlightAuxo(line1);
const line2Html = highlightAuxo(line2);

const hasContent = Boolean((line1 && line1.trim()) || (line2 && line2.trim()));
---

{hasContent && (
  <section id="problem-solution" class="problem-solution-section">
    <div class="content-wrapper">
      {line1Html && (
        <div
          class="problem-statement"
          data-reveal="fade-down"
          data-reveal-duration="200"
          data-reveal-easing="ease-out"
          data-reveal-delay="0"
        >
          <p set:html={line1Html} />
        </div>
      )}

      {line2Html && (
        <div
          class="solution-statement"
          data-reveal="fade-up"
          data-reveal-duration="200"
          data-reveal-easing="ease-out"
          data-reveal-delay="100"
        >
          <p set:html={line2Html} />
        </div>
      )}
    </div>
  </section>
)}

<style>
.problem-solution-section {
  width: 100%;
  padding: 2rem 1.5rem 8rem;
  background: transparent;
  overflow: hidden;
}

.content-wrapper {
  max-width: 1000px;
  margin: 0 auto;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 3rem;
  text-align: center;
}

.problem-statement p {
  font-size: clamp(1.25rem, 3vw, 2rem);
  font-weight: 600;
  color: var(--text-secondary);
  line-height: 1.4;
  margin: 0;
}

.solution-statement p {
  font-size: clamp(1.75rem, 4.5vw, 3.25rem);
  font-weight: 700;
  color: var(--text-primary);
  line-height: 1.3;
  margin: 0;
}

.problem-statement p :global(.auxo-highlight),
.solution-statement p :global(.auxo-highlight) {
  color: var(--accent-green);
  font-weight: 900;
}

@media (max-width: 768px) {
  .problem-solution-section {
    padding: 1.5rem 1.5rem 5rem;
  }

  .content-wrapper {
    gap: 2rem;
  }
}
</style>
