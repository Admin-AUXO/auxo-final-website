---
import { Icon } from "astro-icon/components";
---

<div id="calendly-modal" class="calendly-modal hidden fixed inset-0 bg-theme-primary/95 backdrop-blur-md" aria-hidden="true" aria-labelledby="calendly-modal-title" style="z-index: 10001;">
  <div class="calendly-modal-overlay absolute inset-0 bg-theme-primary/80" data-calendly-close></div>
  <div class="calendly-modal-container relative w-full h-full flex items-center justify-center p-4 sm:p-6 lg:p-8">
    <button
      id="calendly-modal-close"
      class="calendly-modal-close absolute top-4 right-4 sm:top-6 sm:right-6 z-10 w-12 h-12 rounded-full bg-theme-card border-2 border-accent-green/30 hover:border-accent-green hover:bg-accent-green/10 flex items-center justify-center transition-all duration-300 group"
      aria-label="Close calendar"
      data-calendly-close
    >
      <Icon name="mdi:close" class="w-6 h-6 text-theme-primary group-hover:text-accent-green transition-colors" />
    </button>
    
    <div class="calendly-modal-content w-full h-full max-w-7xl mx-auto bg-theme-card rounded-2xl border border-accent-green/20 shadow-2xl overflow-hidden flex flex-col">
      <div id="calendly-widget-container" class="flex-1 w-full h-full min-h-0">
        <div
          id="calendly-widget"
          class="calendly-inline-widget w-full h-full"
          data-url="https://calendly.com/admin-auxodata/30min"
        ></div>
      </div>
    </div>
  </div>
</div>

<style>
  .calendly-modal {
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s ease;
  }

  .calendly-modal.show {
    opacity: 1;
    pointer-events: all;
  }

  .calendly-modal-container {
    animation: fadeIn 0.3s ease;
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: scale(0.95);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  .calendly-modal-close {
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
  }

  .calendly-modal-content {
    animation: slideUp 0.3s ease;
    max-height: 100vh;
    height: 100%;
  }

  @keyframes slideUp {
    from {
      transform: translateY(20px);
      opacity: 0;
    }
    to {
      transform: translateY(0);
      opacity: 1;
    }
  }

  #calendly-widget-container {
    position: relative;
    width: 100%;
    height: 100%;
    min-height: 0;
    overflow: hidden;
  }

  .calendly-inline-widget {
    width: 100%;
    height: 100%;
    min-height: 0;
    display: flex;
    flex-direction: column;
  }

  :global(.calendly-inline-widget > div) {
    flex: 1;
    min-height: 0;
    display: flex;
    flex-direction: column;
  }

  :global(.calendly-inline-widget iframe) {
    width: 100% !important;
    height: 100% !important;
    min-height: 0 !important;
    border: none !important;
    border-radius: 0 !important;
    flex: 1;
  }

  @media (max-width: 640px) {
    .calendly-modal-container {
      padding: 0;
    }

    .calendly-modal-content {
      border-radius: 0;
      border-left: none;
      border-right: none;
    }

    .calendly-modal-close {
      top: 1rem;
      right: 1rem;
      width: 2.5rem;
      height: 2.5rem;
    }
  }
</style>
