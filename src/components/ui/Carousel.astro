---
export interface Props {
  containerId: string;
  trackId: string;
  items: unknown[];
  wrapperClass?: string;
  containerClass?: string;
  trackClass?: string;
  breakpoint?: number;
  activateOnDesktop?: boolean;
  alwaysVisible?: boolean;
}

const {
  containerId,
  trackId,
  items,
  wrapperClass = "",
  containerClass = "",
  trackClass = "",
  breakpoint = 1024,
  activateOnDesktop = false,
  alwaysVisible = false,
} = Astro.props;

const breakpointClass = breakpoint === 1024 ? "lg" : breakpoint === 768 ? "md" : "";

const displayClass = alwaysVisible
  ? ""
  : activateOnDesktop
    ? `hidden ${breakpointClass}:block`
    : breakpointClass ? `${breakpointClass}:hidden` : "";
---

<div
  class:list={["carousel-viewport", wrapperClass, displayClass]}
  data-item-count={items.length}
>
  <div
    class:list={["carousel-container embla", containerClass]}
    id={containerId}
  >
    <div
      class:list={["carousel-track embla__container", trackClass]}
      id={trackId}
    >
      <slot />
    </div>
  </div>
</div>
