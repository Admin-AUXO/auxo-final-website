---
export interface Props {
  containerId: string;
  trackId: string;
  controlSelector: string;
  items: unknown[];
  wrapperClass?: string;
  containerClass?: string;
  trackClass?: string;
  controlsClass?: string;
  controlClass?: string;
  controlsMarginTop?: string;
  breakpoint?: number;
  activateOnDesktop?: boolean;
  alwaysVisible?: boolean;
}

const {
  containerId,
  trackId,
  controlSelector,
  items,
  wrapperClass = "",
  containerClass = "",
  trackClass = "",
  controlsClass = "",
  controlClass = "",
  controlsMarginTop = "mt-6 sm:mt-8",
  breakpoint = 1024,
  activateOnDesktop = false,
  alwaysVisible = false,
} = Astro.props;

const displayClass = alwaysVisible
  ? ""
  : activateOnDesktop
  ? `hidden ${breakpoint === 1024 ? "lg:block" : breakpoint === 768 ? "md:block" : ""}`
  : `${breakpoint === 1024 ? "lg:hidden" : breakpoint === 768 ? "md:hidden" : ""}`;
---

<div class={`carousel-viewport ${wrapperClass} ${displayClass}`}>
  <div class={`carousel-container embla ${containerClass}`} id={containerId}>
    <div class={`carousel-track embla__container ${trackClass}`} id={trackId}>
      <slot />
    </div>
  </div>
  
  <div class={`carousel-controls ${controlsClass} flex justify-center ${controlsMarginTop}`} role="group" aria-label="Carousel controls">
    <button
      type="button"
      class={`carousel-play-pause ${controlClass} group relative flex items-center justify-center w-12 h-12 rounded-full bg-theme-surface/80 hover:bg-theme-surface border border-accent-green/30 hover:border-accent-green/50 transition-all duration-fast touch-manipulation`}
      role="button"
      aria-label="Pause carousel autoplay"
      data-playing="true"
    >
      <svg class="w-5 h-5 text-theme-secondary group-hover:text-theme-primary transition-colors duration-fast" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
        <path d="M6 4h4v16H6V4zM14 4h4v16h-4V4z"/>
      </svg>
      <span class="sr-only">Pause carousel</span>
    </button>
  </div>
</div>


